<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>{% block title %}BizRay{% endblock %}</title>

  <link rel="icon" href="{{ url_for('static', filename='img/icon.ico') }}">

  <!-- Fonts & CSS -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/fontawesome.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/templatemo-plot-listing.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animated.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.css') }}">
  <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
</head>

<body>

  <!-- Preloader -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>

  <!-- Header -->
  {% if page != "index" %}
  <div class="header-spacer"></div>
  {% endif %}
  <header class="header-area header-sticky wow slideInDown" data-wow-duration="0.75s" data-wow-delay="0s">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <a href="{{ url_for('main.index') }}" class="logo">
              <img src="{{ url_for('static', filename='img/BR_logo.png') }}" alt="BizRay">
            </a>

            <ul class="nav">
              {% if page != "index" %}
              <li>
                <div class="main-white-button">
                  <a class="pill-btn back-btn" href="{{ url_for('main.index') }}">Back to search</a>
                </div>
              </li>
              {% endif %}

              {% if logged_in %}
              <!-- Show only when logged in -->
              <li>
                <div class="main-white-button">
                  <a class="pill-btn back-btn"  href="{{ url_for('main.logout') }}">Logout</a>
                </div>
              </li>
              {% else %}
              <!-- Show only when logged out -->
              {% if page != "login" %}
              <li>
                <div class="main-white-button">
                  <a class="pill-btn back-btn"  href="{{ url_for('main.login') }}">Login</a>
                </div>
              </li>
              {% endif %}
              {% endif %}
            </ul>

            <a class='menu-trigger'><span>Menu</span></a>
          </nav>
        </div>
      </div>
    </div>
  </header>
  


  <div id="flash-container"
     class="position-fixed top-0 start-50 translate-middle-x mt-3"
     style="z-index: 2000; width: 90%; max-width: 600px;">
  {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show shadow"
             role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"
                  aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
  </div>


  <!-- Main Content -->
  <main >
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <!-- Footer content here (same as your provided footer) -->
        <!-- ... -->
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='vendor/jquery/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/owl-carousel.js') }}"></script>
  <script src="{{ url_for('static', filename='js/animation.js') }}"></script>
  <script src="{{ url_for('static', filename='js/imagesloaded.js') }}"></script>
  <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
document.addEventListener("DOMContentLoaded", () => {
  // Wait for Bootstrap to be ready
  const interval = setInterval(() => {
    if (window.bootstrap) {
      clearInterval(interval);

      const alerts = document.querySelectorAll('#flash-container .alert');
      alerts.forEach(alert => {
        setTimeout(() => {
          alert.classList.add('fade'); // trigger fade-out
          alert.classList.remove('show');
          setTimeout(() => {
            const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
            bsAlert.close();
          }, 500); // give the fade-out animation 0.5s
        }, 3000); // 3 seconds visible
      });
    }
  }, 100);
});
</script>

{% block extra_scripts %}{% endblock %}

</body>
</html>